# 问题记录

记录平时遇到的问题
<!--more-->


### 订单队列pop出订单后，没有往下执行  

下单被pending，一直代报 状态是placeOrderTask 线程pending了，拿不到redis 连接，涉及知识点，如何查看进程状态，jstack，以及redis pool的东西。  
成交回报连接成功之后，又重新连接，并且timer没有cancel  
因为没有keepAlive线程  主线程死了  没有cacell timer  

### Redis连接池连接波动

redis连接池连接波动问题，通过设置maxIdle 跟maxActive一致就可以，之前是20，40，那么行情一来，变成40，过一会行情少了，变成20了，然后又过来又变成40了，大小的话可以通过测试环境调，可以设定一个比较大的值，看最后稳定的大小。比如bitfinx设置的最大256，最后池子大小132左右。当然对于153 所有的所都连这个，需要各个所平衡。太多的连接也会影响到性能。类似的问题同样适应于mysql
